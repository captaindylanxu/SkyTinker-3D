<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¯å¢ƒå˜é‡æµ‹è¯•</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .status {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .success {
            background: #10b981;
        }
        .error {
            background: #ef4444;
        }
        .warning {
            background: #f59e0b;
        }
        .info {
            background: #3b82f6;
        }
        code {
            background: rgba(255,255,255,0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }
        h1 {
            color: #60a5fa;
        }
        .check-item {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ ç¯å¢ƒå˜é‡æµ‹è¯•é¡µé¢</h1>
    <p>è¿™ä¸ªé¡µé¢å¸®åŠ©ä½ æ£€æŸ¥ Vercel éƒ¨ç½²åçš„ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®ã€‚</p>
    
    <div id="results"></div>

    <script type="module">
        const results = document.getElementById('results');
        
        // æ£€æŸ¥ç¯å¢ƒå˜é‡
        const checks = [
            {
                name: 'VITE_SUPABASE_URL',
                value: import.meta.env.VITE_SUPABASE_URL,
                expected: 'https://zwtxjoamnjhuveaxwlbv.supabase.co',
            },
            {
                name: 'VITE_SUPABASE_ANON_KEY',
                value: import.meta.env.VITE_SUPABASE_ANON_KEY,
                expected: 'ä»¥ eyJ å¼€å¤´çš„é•¿å­—ç¬¦ä¸²',
            },
        ];

        let allPassed = true;

        checks.forEach(check => {
            const div = document.createElement('div');
            div.className = 'check-item';
            
            if (check.value) {
                const isUrl = check.name.includes('URL');
                const displayValue = isUrl 
                    ? check.value 
                    : `${check.value.substring(0, 20)}... (é•¿åº¦: ${check.value.length})`;
                
                const matches = isUrl 
                    ? check.value === check.expected
                    : check.value.startsWith('eyJ');
                
                if (matches) {
                    div.innerHTML = `âœ… <strong>${check.name}</strong>: ${displayValue}`;
                } else {
                    div.innerHTML = `âš ï¸ <strong>${check.name}</strong>: ${displayValue}<br><small>æœŸæœ›: ${check.expected}</small>`;
                    allPassed = false;
                }
            } else {
                div.innerHTML = `âŒ <strong>${check.name}</strong>: æœªè®¾ç½®`;
                allPassed = false;
            }
            
            results.appendChild(div);
        });

        // æ€»ç»“
        const summary = document.createElement('div');
        summary.className = `status ${allPassed ? 'success' : 'error'}`;
        
        if (allPassed) {
            summary.innerHTML = `
                <h2>âœ… ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®ï¼</h2>
                <p>æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡éƒ½å·²æ­£ç¡®è®¾ç½®ã€‚Supabase åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
            `;
        } else {
            summary.innerHTML = `
                <h2>âŒ ç¯å¢ƒå˜é‡é…ç½®æœ‰é—®é¢˜</h2>
                <p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¿®å¤ï¼š</p>
                <ol>
                    <li>åœ¨ Vercel Dashboard ä¸­æ£€æŸ¥ç¯å¢ƒå˜é‡è®¾ç½®</li>
                    <li>ç¡®ä¿å˜é‡åç§°æ­£ç¡®ï¼ˆå¿…é¡»æœ‰ VITE_ å‰ç¼€ï¼‰</li>
                    <li>ç¡®ä¿å˜é‡å€¼æ­£ç¡®ï¼ˆæ— ç©ºæ ¼ã€æ— æ¢è¡Œï¼‰</li>
                    <li>ç¡®ä¿åº”ç”¨åˆ°äº† Production ç¯å¢ƒ</li>
                    <li><strong>æ¸…é™¤æ„å»ºç¼“å­˜å¹¶é‡æ–°éƒ¨ç½²</strong></li>
                </ol>
            `;
        }
        
        results.insertBefore(summary, results.firstChild);

        // æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒå˜é‡ï¼ˆè°ƒè¯•ç”¨ï¼‰
        const envDiv = document.createElement('div');
        envDiv.className = 'status info';
        envDiv.innerHTML = `
            <h3>ğŸ“‹ ç¯å¢ƒä¿¡æ¯</h3>
            <pre>${JSON.stringify({
                MODE: import.meta.env.MODE,
                DEV: import.meta.env.DEV,
                PROD: import.meta.env.PROD,
                BASE_URL: import.meta.env.BASE_URL,
            }, null, 2)}</pre>
        `;
        results.appendChild(envDiv);

        // æ§åˆ¶å°è¾“å‡º
        console.log('ğŸ” Environment Variables Check:');
        checks.forEach(check => {
            console.log(`${check.name}:`, check.value ? 'âœ“ Set' : 'âœ— Missing');
            if (check.value) {
                console.log(`  Value: ${check.value.substring(0, 30)}...`);
            }
        });
    </script>
</body>
</html>
